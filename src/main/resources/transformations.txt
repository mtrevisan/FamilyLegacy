direct:


reverse:
for-each INDIVIDUAL id create INDI
	INDI.id = INDIVIDUAL.id
	for-each INDIVIDUAL.NAME create INDI.NAME
		//TODO
		name-components[name, surname, name-suffix] = INDI.NAME.value
		INDIVIDUAL.NAME.TYPE.value = INDI.NAME.TYPE.value
		INDIVIDUAL.NAME.TITLE.value = INDI.NAME.NPFX.value
		INDIVIDUAL.NAME.TITLE.PHONETIC.VALUE.value = INDI.NAME.FONE.NPFX.value
		INDIVIDUAL.NAME.TITLE.TRANSCRIPTION.value = INDI.NAME.ROMN.TYPE.value
		INDIVIDUAL.NAME.TITLE.TRANSCRIPTION.TYPE.value = INDI.NAME.ROMN.value
		INDIVIDUAL.NAME.TITLE.TRANSCRIPTION.VALUE.value = INDI.NAME.ROMN.NPFX.value
		INDIVIDUAL.NAME.PERSONAL_NAME.value = INDI.NAME.GIVN.value | name-components[name]
		INDIVIDUAL.NAME.PERSONAL_NAME.PHONETIC.VALUE.value = INDI.NAME.FONE.GIVN.value
		INDIVIDUAL.NAME.PERSONAL_NAME.TRANSCRIPTION.value = INDI.NAME.ROMN.TYPE.value
		INDIVIDUAL.NAME.PERSONAL_NAME.TRANSCRIPTION.TYPE.value = INDI.NAME.ROMN.value
		INDIVIDUAL.NAME.PERSONAL_NAME.TRANSCRIPTION.VALUE.value = INDI.NAME.ROMN.GIVN.value
		INDIVIDUAL.NAME.PERSONAL_NAME.NAME_SUFFIX.value = INDI.NAME.NSFX.value | name-components[name-suffix]
		INDIVIDUAL.NAME.PERSONAL_NAME.NAME_SUFFIX.PHONETIC.VALUE.value = INDI.NAME.FONE.NSFX.value
		INDIVIDUAL.NAME.PERSONAL_NAME.NAME_SUFFIX.TRANSCRIPTION.value = INDI.NAME.ROMN.TYPE.value
		INDIVIDUAL.NAME.PERSONAL_NAME.NAME_SUFFIX.TRANSCRIPTION.TYPE.value = INDI.NAME.ROMN.value
		INDIVIDUAL.NAME.PERSONAL_NAME.NAME_SUFFIX.TRANSCRIPTION.VALUE.value = INDI.NAME.ROMN.NSFX.value
		INDIVIDUAL.NAME.INDIVIDUAL_NICKNAME.value = INDI.NAME.NICK.value
		INDIVIDUAL.NAME.INDIVIDUAL_NICKNAME.PHONETIC.VALUE.value = INDI.NAME.FONE.NICK.value
		INDIVIDUAL.NAME.INDIVIDUAL_NICKNAME.TRANSCRIPTION.value = INDI.NAME.ROMN.TYPE.value
		INDIVIDUAL.NAME.INDIVIDUAL_NICKNAME.TRANSCRIPTION.TYPE.value = INDI.NAME.ROMN.value
		INDIVIDUAL.NAME.INDIVIDUAL_NICKNAME.TRANSCRIPTION.VALUE.value = INDI.NAME.ROMN.NICK.value
		INDIVIDUAL.NAME.FAMILY_NAME.value = INDI.NAME.SPFX.value + ' ' + INDI.NAME.SURN.value | name-components[surname]
		INDIVIDUAL.NAME.FAMILY_NAME.PHONETIC.VALUE.value = INDI.NAME.FONE.SPFX.value + ' ' + INDI.NAME.FONE.SURN.value
		INDIVIDUAL.NAME.FAMILY_NAME.TRANSCRIPTION.value = INDI.NAME.ROMN.TYPE.value
		INDIVIDUAL.NAME.FAMILY_NAME.TRANSCRIPTION.TYPE.value = INDI.NAME.ROMN.value
		INDIVIDUAL.NAME.FAMILY_NAME.TRANSCRIPTION.VALUE.value = INDI.NAME.ROMN.SPFX.value + ' ' + INDI.NAME.ROMN.SURN.value
		transfer INDI.NAME.NOTE to INDIVIDUAL.NAME.NOTE
		transfer INDI.NAME.FONE.NOTE to INDIVIDUAL.NAME.NOTE
		transfer INDI.NAME.ROMN.NOTE to INDIVIDUAL.NAME.NOTE
		transfer INDI.NAME.SOUR to INDIVIDUAL.NAME.SOURCE
		transfer INDI.NAME.FONE.SOUR to INDIVIDUAL.NAME.SOURCE
		transfer INDI.NAME.ROMN.SOUR to INDIVIDUAL.NAME.SOURCE
	INDIVIDUAL.SEX.value = INDI.SEX.value
	for-each INDI.FAMC create INDIVIDUAL.FAMILY_CHILD
		INDIVIDUAL.FAMILY_CHILD.xref = INDI.FAMC.xref
		INDIVIDUAL.FAMILY_CHILD.PEDIGREE.PARENT1.value = INDI.FAMC.PEDI.value
		INDIVIDUAL.FAMILY_CHILD.PEDIGREE.PARENT2.value = INDI.FAMC.PEDI.value
		INDIVIDUAL.FAMILY_CHILD.CERTAINTY.value = INDI.FAMC.STAT.value
		transfer INDI.FAMC.NOTE to INDIVIDUAL.FAMILY_CHILD.NOTE
	for-each INDI.FAMS create INDIVIDUAL.FAMILY_SPOUSE
		INDIVIDUAL.FAMILY_SPOUSE.xref = INDI.FAMS.xref
		transfer INDI.FAMS.NOTE to INDIVIDUAL.FAMILY_SPOUSE.NOTE
	for-each INDI.ASSO create INDIVIDUAL.ASSOCIATION
		INDIVIDUAL.ASSOCIATION.xref = INDI.ASSO.xref
		INDIVIDUAL.ASSOCIATION.TYPE.value = INDI.ASSO.TYPE.value ('FAM'>'family', 'INDI'>'individual', 'SOUR|OBJE|REPO|SUBM|NOTE|SUBN'>nothing)
		INDIVIDUAL.ASSOCIATION.RELATIONSHIP.value = INDI.ASSO.RELA.value
		transfer INDI.ASSO.NOTE to INDIVIDUAL.ASSOCIATION.NOTE
		transfer INDI.ASSO.SOUR to INDIVIDUAL.ASSOCIATION.SOURCE
	for-each INDI.ALIA create INDIVIDUAL.ALIAS
		INDIVIDUAL.ALIAS.xref = INDI.ALIA.xref
	for-each INDI.[BIRT|CHR|DEAT|BURI|CREM|ADOP|BAPM|BARM|BASM|BLES|CHRA|CONF|FCOM|ORDN|NATU|EMIG|IMMI|CENS|PROB|WILL|GRAD|RETI|EVEN] create INDIVIDUAL.EVENT
	for-each INDI.[CAST|DSCR|EDUC|IDNO|NATI|NCHI|NMR|OCCU|PROP|RELI|RESI|SSN|TITL|FACT] create INDIVIDUAL.EVENT
	transfer INDI.NOTE to INDIVIDUAL.NOTE
	transfer INDI.SOUR,OBJE to INDIVIDUAL.SOURCE
	INDIVIDUAL.RESTRICTION.value = INDI.RESN.value
